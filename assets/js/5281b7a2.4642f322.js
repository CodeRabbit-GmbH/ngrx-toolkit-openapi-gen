"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[2443],{936(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"architecture","title":"Architecture","description":"Generation Pipeline","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/ngrx-toolkit-openapi-gen/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"Generated Store API","permalink":"/ngrx-toolkit-openapi-gen/store-api"},"next":{"title":"Customization","permalink":"/ngrx-toolkit-openapi-gen/customization"}}');var a=t(4848),r=t(8453);const i={sidebar_position:7},o="Architecture",d={},l=[{value:"Generation Pipeline",id:"generation-pipeline",level:2},{value:"Output Structure",id:"output-structure",level:2},{value:"Generated Store Pattern",id:"generated-store-pattern",level:2},{value:"Generated Model",id:"generated-model",level:2},{value:"Multiple APIs",id:"multiple-apis",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,a.jsx)(n.h2,{id:"generation-pipeline",children:"Generation Pipeline"}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    A[OpenAPI Spec] --\x3e B[Parser]\n    B --\x3e C[Semantic IR]\n    C --\x3e D[Code Generator]\n    D --\x3e E[Models]\n    D --\x3e F[Stores]\n    D --\x3e G[Token]"}),"\n",(0,a.jsx)(n.h2,{id:"output-structure",children:"Output Structure"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"generated/\n\u2514\u2500\u2500 <api-slug>/\n    \u251c\u2500\u2500 api-base-path.token.ts\n    \u2514\u2500\u2500 <domain>/\n        \u251c\u2500\u2500 application/<domain>.store.ts\n        \u2514\u2500\u2500 entities/<entity>.model.ts\n"})}),"\n",(0,a.jsx)(n.h2,{id:"generated-store-pattern",children:"Generated Store Pattern"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"export const TaskStore = signalStore(\n  { providedIn: 'root' },\n\n  // Base URL injection\n  withProps(() => ({\n    _baseUrl: inject(TASKS_API_BASE_PATH),\n  })),\n\n  // State for params and selection\n  withState({\n    tasksParams: {} as { status?: string },\n    selectedTaskId: undefined as string | undefined\n  }),\n\n  // HTTP resources\n  withResource((store) => ({\n    tasks: httpResource<TaskModel[]>(() => ({\n      url: `${store._baseUrl}/api/tasks`,\n      params: store.tasksParams(),\n    }), { defaultValue: [] }),\n\n    taskDetail: httpResource<TaskModel | undefined>(\n      () => store.selectedTaskId() === undefined\n        ? undefined\n        : `${store._baseUrl}/api/tasks/${store.selectedTaskId()}`\n    )\n  })),\n\n  // Helper methods\n  withMethods((store) => ({\n    setTasksParams(params: { status?: string }): void {\n      patchState(store, { tasksParams: params });\n    },\n    selectTask(id: string | undefined): void {\n      patchState(store, { selectedTaskId: id });\n    }\n  })),\n\n  // Mutations with auto-reload\n  withMutations((store) => ({\n    createTask: httpMutation<CreateTaskModel, TaskModel>({\n      request: (input) => ({\n        url: `${store._baseUrl}/api/tasks`,\n        method: 'POST',\n        body: input,\n      }),\n      onSuccess: () => store._tasksReload()\n    }),\n\n    deleteTask: httpMutation<{ id: string }, void>({\n      request: (input) => ({\n        url: `${store._baseUrl}/api/tasks/${input.id}`,\n        method: 'DELETE',\n      }),\n      onSuccess: () => store._tasksReload()\n    })\n  }))\n);\n"})}),"\n",(0,a.jsx)(n.h2,{id:"generated-model",children:"Generated Model"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"export interface TaskModel {\n  id?: string;\n  title?: string;\n  status?: 'pending' | 'completed';\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"multiple-apis",children:"Multiple APIs"}),"\n",(0,a.jsx)(n.p,{children:"Each API generates into its own folder:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npx ngrx-openapi-gen -i tasks.yaml -o ./generated --api-name TasksApi\nnpx ngrx-openapi-gen -i flights.yaml -o ./generated --api-name FlightsApi\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"generated/\n\u251c\u2500\u2500 tasks-api/\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 flights-api/\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,a.jsx)(n.p,{children:"Configure each with its own base URL:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"providers: [\n  { provide: TASKS_API_BASE_PATH, useValue: 'http://localhost:3000' },\n  { provide: FLIGHTS_API_BASE_PATH, useValue: 'https://api.flights.com' },\n]\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);